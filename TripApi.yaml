openapi: 3.0.3
info:
  version: 0.0.1-SNAPSHOT
  description: API for reserving trips for Tinkoff employers
  title: Tinkoff trip API
  contact:
    email: alexei.talanov003@mail.ru
  license:
    name: Chestnoye slovo 2.0
servers:
  - url: http://localhost:8080
    description: Dev Server
tags:
  - name: usersEnd
    description: Endpoint for users and theirs peripherals
  - name: requestsEnd
    description: Endpoints for requests
  - name: tripsEnd
    description: Endpoints for trips
  - name: accommodationsEnd
    description: Endpoints for accommodations
  - name: destinationsEnd
    description: Endpoints for destinations
  - name: notificationsEnd
    description: Endpoints for notifications
  - name: officesEnd
    description: Endpoints for offices
  - name: loginEnd
    description: Endpoints for Auth


paths:
  '/users':
    post:
      tags:
        - usersEnd
      summary: создание нового пользователя
      operationId: createNewUser
      parameters:
        - in: header
          name: Authorization
          schema:
            type: string
            format: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
          required: true
      requestBody:
        description: структура для создания нового пользователя
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/User'
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Id'
        '400':
          description: Bad Request
          content:
            application/json:
              schema: 
                type: string
                description: description
        '500':
          description: Internal server error
    put:
      tags:
        - usersEnd
      summary: Updating user by id(changes in subordinates field won't be registered)
      operationId: updateUser
      requestBody:
        description: User structure with id
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/User'
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: string
                description: description
        '500':
          description: Internal server error

  '/users/{uuid}':
    get:
      tags:
        - usersEnd
      summary: Получение пользователя по его {id}
      operationId: getUserById
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
          required: true
        - in: header
          name: Authorization
          schema:
            type: string
            format: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
          required: true
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: string
                description: description
        '500':
          description: Internal server error

  '/users/{uuid}/trips-at/{page}':
    get:
      tags:
        - usersEnd
      summary: Получение страницы номер {page}(либо все сразу если не указано) из n командировок для пользователя с заданным {id}
      operationId: getTripsAt
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
          required: true
        - in: path
          name: page
          schema:
            type: integer
            format: int32
          required: true
        - in: header
          name: Authorization
          schema:
            type: string
            format: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
          required: true
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Trip'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: string
                description: description
        '500':
          description: Internal server error

  '/users/{uuid}/incoming-requests-at/{page}':
    get:
      tags:
        - usersEnd
      summary: Получение страницы номер {page}(либо все сразу если не указано) из n запросов для ментора с заданным {id}
      operationId: getIncomingRequestsAt
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
          required: true
        - in: path
          name: page
          schema:
            type: integer
            format: int32
          required: true
        - in: header
          name: Authorization
          schema:
            type: string
            format: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
          required: true
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Request'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: string
                description: description
        '500':
          description: Internal server error

  '/users/{uuid}/outgoing-requests-at/{page}':
    get:
      tags:
        - usersEnd
      summary: Получение страницы номер {page}(либо все сразу если не указано) из n запросов для сотрудника с заданным {id}
      operationId: getOutgoingRequestsAt
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
          required: true
        - in: path
          name: page
          schema:
            type: integer
            format: int32
          required: true
        - in: header
          name: Authorization
          schema:
            type: string
            format: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
          required: true
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Request'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: string
                description: description
        '500':
          description: Internal server error

  '/users/{uuid}/unwatched-notifications':
    get:
      tags:
        - usersEnd
      operationId: getUnwatchedNotifications
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
          required: true
        - in: header
          name: Authorization
          schema:
            type: string
            format: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
          required: true
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Notification'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: string
                description: description
        '500':
          description: Internal server error

  '/users/{approver}/subordinates/{subordinate}':
    post:
      tags:
        - usersEnd
      operationId: createRelation
      description: Creates a relation for user with id {approver}
      parameters:
        - in: path
          name: approver
          schema:
            type: string
            format: uuid
          required: true
        - in: path
          name: subordinate
          schema:
            type: string
            format: uuid
          required: true
        - in: header
          name: Authorization
          schema:
            type: string
            format: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
          required: true
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: string
                description: description
        '500':
          description: Internal server error
    delete:
      tags:
        - usersEnd
      operationId: deleteRelation
      description: Deletes a relation for user with id {approver}
      parameters:
        - in: path
          name: approver
          schema:
            type: string
            format: uuid
          required: true
        - in: path
          name: subordinate
          schema:
            type: string
            format: uuid
          required: true
        - in: header
          name: Authorization
          schema:
            type: string
            format: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
          required: true
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: string
                description: description
        '500':
          description: Internal server error



  '/requests':
    post:
      tags:
        - requestsEnd
      summary: Создание нового запроса
      operationId: createNewRequest
      parameters:
        - in: header
          name: Authorization
          schema:
            type: string
            format: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
          required: true
      requestBody:
        description: Структура запроса
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestDto'
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Id'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: string
                description: description
        '500':
          description: Internal server error
    put:
      tags:
        - requestsEnd
      summary: Обновление запроса
      operationId: updateRequest
      parameters:
        - in: header
          name: Authorization
          schema:
            type: string
            format: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
          required: true
      requestBody:
        description: Структура запроса
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestDto'
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: string
                description: description
        '500':
          description: Internal server error

  '/requests/{uuid}':
    get:
      tags:
        - requestsEnd
      summary: Получение реквеста по заданному UUID.
      operationId: getRequestById
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
          required: true
        - in: header
          name: Authorization
          schema:
            type: string
            format: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
          required: true
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Request'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: string
                description: description
        '500':
          description: Internal server error

  '/requests/{uuid}/approve':
    put:
      tags:
        - requestsEnd
      summary: Подтверждение реквеста с последующим созданием сущности Trip в базе данных(Accommodation и Destination должны создаваться заранее).
      operationId: approveRequest
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
          required: true
        - in: header
          name: Authorization
          schema:
            type: string
            format: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
          required: true
      requestBody:
        description: ТрипДто который создастся в бд обязателен
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestStatusChangeDto'
      responses:
        '200':
          description: Success(Id of created Trip)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Id'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: string
                description: description
        '500':
          description: Internal server error

  '/requests/{uuid}/decline':
    put:
      tags:
        - requestsEnd
      summary: Изменение статуса заявки на DECLINED с добавлением комментария и айди аппрувера
      operationId: declineRequest
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
          required: true
        - in: header
          name: Authorization
          schema:
            type: string
            format: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
          required: true
      requestBody:
        description: ТрипДто НЕ нужен
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestStatusChangeDto'
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: string
                description: description
        '500':
          description: Internal server error

  '/requests/{uuid}/send-for-editing':
    put:
      tags:
        - requestsEnd
      summary: Изменение статуса заявки на AWAIT_CHANGES с добавлением комментария и айди аппрувера
      operationId: sendRequestForEditing
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
          required: true
        - in: header
          name: Authorization
          schema:
            type: string
            format: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
          required: true
      requestBody:
        description: ТрипДто НЕ нужен
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestStatusChangeDto'
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: string
                description: description
        '500':
          description: Internal server error

  '/trips/{uuid}':
    get:
      tags:
        - tripsEnd
      summary: Получение командировки по заданному UUID
      operationId: getTripById
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
          required: true
        - in: header
          name: Authorization
          schema:
            type: string
            format: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
          required: true
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Trip'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: string
                description: description
        '500':
          description: Internal server error

  '/trips':
    post:
      tags:
        - tripsEnd
      summary: Trip creation
      operationId: createNewTrip
      parameters:
        - in: header
          name: Authorization
          schema:
            type: string
            format: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
          required: true
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TripDto'
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Id'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: string
                description: description
        '500':
          description: Internal server error
    put:
      tags:
        - tripsEnd
      summary: Trip update
      operationId: updateTrip
      parameters:
        - in: header
          name: Authorization
          schema:
            type: string
            format: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
          required: true
      requestBody:
        description: Структура запроса
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TripDto'
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: string
                description: description
        '500':
          description: Internal server error

  '/trips/{uuid}/cancel':
    put:
      tags:
        - tripsEnd
      summary: Отмена трипа(complete-аться скорее всего будет автоматически)
      operationId: cancelTrip
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
          required: true
        - in: header
          name: Authorization
          schema:
            type: string
            format: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
          required: true
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: string
                description: description
        '500':
          description: Internal server error

  '/accommodations':
    post:
      tags:
        - accommodationsEnd
      summary: Accommodation creation
      operationId: createNewAccommodation
      parameters:
        - in: header
          name: Authorization
          schema:
            type: string
            format: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
          required: true
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Accommodation'
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Id'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: string
                description: description
        '500':
          description: Internal server error
    put:
      tags:
        - accommodationsEnd
      summary: Accommodation update
      operationId: updateAccommodation
      parameters:
        - in: header
          name: Authorization
          schema:
            type: string
            format: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
          required: true
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Accommodation'
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: string
                description: description
        '500':
          description: Internal server error

  '/accommodations/{uuid}':
    get:
      tags:
        - accommodationsEnd
      summary: Get an accommodation
      operationId: getAccommodation
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
          required: true
        - in: header
          name: Authorization
          schema:
            type: string
            format: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
          required: true
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Accommodation'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: string
                description: description
        '500':
          description: Internal server error
    delete:
      tags:
        - accommodationsEnd
      summary: Delete an accommodation
      operationId: deleteAccommodation
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
          required: true
        - in: header
          name: Authorization
          schema:
            type: string
            format: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
          required: true
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: string
                description: description
        '500':
          description: Internal server error

  '/destinations':
    post:
      tags:
        - destinationsEnd
      summary: Destination creation
      operationId: createNewDestination
      parameters:
        - in: header
          name: Authorization
          schema:
            type: string
            format: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
          required: true
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DestinationDto'
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Id'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: string
                description: description
        '500':
          description: Internal server error
    put:
      tags:
        - destinationsEnd
      summary: Destination update
      operationId: updateDestination
      parameters:
        - in: header
          name: Authorization
          schema:
            type: string
            format: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
          required: true
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DestinationDto'
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: string
                description: description
        '500':
          description: Internal server error

  '/destinations/{uuid}':
    get:
      tags:
        - destinationsEnd
      summary: Get a destination
      operationId: getDestination
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
          required: true
        - in: header
          name: Authorization
          schema:
            type: string
            format: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
          required: true
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Destination'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: string
                description: description
        '500':
          description: Internal server error
    delete:
      tags:
        - destinationsEnd
      summary: Delete a destination
      operationId: deleteDestination
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
          required: true
        - in: header
          name: Authorization
          schema:
            type: string
            format: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
          required: true
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: string
                description: description
        '500':
          description: Internal server error


  '/notifications/{uuid}/watch':
    put:
      tags:
        - notificationsEnd
      summary: Изменение нотификации на просмотренную
      operationId: markAsWatched
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
          required: true
        - in: header
          name: Authorization
          schema:
            type: string
            format: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
          required: true
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: string
                description: description
        '500':
          description: Internal server error

  '/notifications/{uuid}':
    get:
      tags:
        - notificationsEnd
      summary: Получение нотификации(вряд ли пригодится)
      operationId: getNotification
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
          required: true
        - in: header
          name: Authorization
          schema:
            type: string
            format: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
          required: true
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Notification'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: string
                description: description
        '500':
          description: Internal server error

  '/offices':
    post:
      tags:
        - officesEnd
      summary: Office creation
      operationId: createNewOffice
      parameters:
        - in: header
          name: Authorization
          schema:
            type: string
            format: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
          required: true
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Office'
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Id'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: string
                description: description
        '500':
          description: Internal server error
    put:
      tags:
        - officesEnd
      summary: Office update
      operationId: updateOffice
      parameters:
        - in: header
          name: Authorization
          schema:
            type: string
            format: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
          required: true
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Office'
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: string
                description: description
        '500':
          description: Internal server error

  '/offices/{uuid}':
    get:
      tags:
        - officesEnd
      summary: Get an office
      operationId: getOffice
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
          required: true
        - in: header
          name: Authorization
          schema:
            type: string
            format: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
          required: true
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Office'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: string
                description: description
        '500':
          description: Internal server error
    delete:
      tags:
        - officesEnd
      summary: Delete an office
      operationId: deleteOffice
      parameters:
        - in: path
          name: uuid
          schema:
            type: string
            format: uuid
          required: true
        - in: header
          name: Authorization
          schema:
            type: string
            format: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
          required: true
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: string
                description: description
        '500':
          description: Internal server error

  '/api/login':
    post:
      tags:
        - loginEnd
      summary: Login as a user
      operationId: login
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: string
                description: jwt token
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: string
                description: description
        '500':
          description: Internal server error


components:
  schemas:
    User:
      type: object
      description: worker object
      required:
        - email
        - password
        - firstName
        - secondName
        - userRole
      properties:
        id:
          type: string
          format: uuid
        email:
          type: string
        password:
          type: string
        firstName:
          type: string
        secondName:
          type: string
        subordinates:
          type: array
          items:
            $ref: '#/components/schemas/User'
        userRole:
          type: string

    Notification:
      type: object
      properties:
        id:
          type: string
          format: uuid
        request:
          $ref: '#/components/schemas/Request'
        watched:
          type: boolean
        userId:
          type: string
          format: uuid

    NotificationDto:
      type: object
      properties:
        id:
          type: string
          format: uuid
        requestId:
          type: string
          format: uuid
        watched:
          type: boolean
        userId:
          type: string
          format: uuid

    Trip:
      type: object
      properties:
        id:
          type: string
          format: uuid
        tripStatus:
          type: string
          enum:
            - pending
            - completed
            - cancelled
        accommodation:
          $ref: '#/components/schemas/Accommodation'
        destination:
          $ref: '#/components/schemas/Destination'
        requestId:
          type: string
          format: uuid


    Request:
      type: object
      required:
        - requestStatus
        - workerFirstName
        - workerSecondName
        - startDate
        - endDate
        - destination
      properties:
        id:
          type: string
          format: uuid
        requestStatus:
          type: string
          enum:
            - approved
            - pending
            - awaitChanges
            - declined
        description:
          type: string
        workerFirstName:
          type: string
        workerSecondName:
          type: string
        workerEmail:
          type: string
        destination:
          $ref: '#/components/schemas/Destination'
        comment:
          type: string
        approverId:
          type: string
          format: uuid
        startDate:
          type: string
          format: date
          example: "2021-01-30T08:30:00Z"
        endDate:
          type: string
          format: date
          example: "2021-01-30T08:30:00Z"
        ticketsUrl:
          type: string
          format: url

    Accommodation:
      type: object
      required:
        - id
      properties:
        id:
          type: string
          format: uuid
        address:
          type: string
        bookingUrl:
          type: string
          format: url

    Destination:
      type: object
      properties:
        id:
          type: string
          format: uuid
        description:
          type: string
        office:
          $ref: '#/components/schemas/Office'
        seatPlace:
          type: string

    Office:
      type: object
      properties:
        id:
          type: string
          format: uuid
        address:
          type: string
        description:
          type: string

    RequestDto:
      type: object
      properties:
        id:
          type: string
          format: uuid
        description:
          type: string
        workerId:
          type: string
          format: uuid
        destinationId:
          type: string
          format: uuid
        comment:
          type: string
        startDate:
          type: string
          format: date
          example: "2021-01-30T08:30:00Z"
        endDate:
          type: string
          format: date
          example: "2021-01-30T08:30:00Z"
        ticketsUrl:
          type: string
          format: url

    TripDto:
      type: object
      description: Краткие сведения о командировке
      properties:
        id:
          type: string
          format: uuid
        tripStatus:
          type: string
          enum:
            - pending
            - completed
            - cancelled
        accommodationId:
          type: string
          format: uuid
        destinationId:
          type: string
          format: uuid
        requestId:
          type: string
          format: uuid

    DestinationDto:
      type: object
      properties:
        id:
          type: string
          format: uuid
        description:
          type: string
        officeId:
          type: string
          format: uuid
        seatPlace:
          type: string

    RequestStatusChangeDto:
      type: object
      properties:
        approverId:
          type: string
          format: uuid
        tripDto:
          $ref: "#/components/schemas/TripDto"
        comment:
          type: string

    Id:
      type: object
      description: id return type
      properties:
        id:
          type: string
          format: uuid

    LoginRequest:
      type: object
      description: Needed at login endpoint
      properties:
        email:
          type: string
        password:
          type: string
          format: uuid
